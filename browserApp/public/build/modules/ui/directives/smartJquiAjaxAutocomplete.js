define(["modules/ui/module","jquery-ui"],function(a){"use strict";a.registerDirective("smartJquiAjaxAutocomplete",function(){return{restrict:"A",scope:{ngModel:"="},link:function(a,b,c){function d(a){return a.split(/,\s*/)}function e(a){return d(a).pop()}function f(a){return d(a)[0]}b.autocomplete({source:function(a,b){jQuery.getJSON("http://gd.geobytes.com/AutoCompleteCity?callback=?&q="+e(a.term),function(a){b(a)})},minLength:3,select:function(c,e){var g=e.item,h=g.value;if("undefined"==typeof h&&(h=b.val()),h){var i=d(b.val());i.pop(),i.push(f(h)),i.push(""),a.$apply(function(){a.ngModel=i.join(", ")})}return!1},focus:function(){return!1},delay:100})}}})});