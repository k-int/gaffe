define(["modules/ui/module","jquery","jquery-ui"],function(a,b){"use strict";a.registerDirective("smartJquiDynamicTabs",["$timeout",function(a){function c(a){function c(){var a=d.val()||"Tab "+g,c="tabs-"+g,i=b(f.replace(/#\{href\}/g,"#"+c).replace(/#\{label\}/g,a)),j=e.val()||"Tab "+g+" content.";h.find(".ui-tabs-nav").append(i),h.append("<div id='"+c+"'><p>"+j+"</p></div>"),h.tabs("refresh"),g++,b("#tab_title").val(""),b("#tab_content").val("")}b("#tabs2").tabs();{var d=b("#tab_title"),e=b("#tab_content"),f="<li style='position:relative;'> <span class='air air-top-left delete-tab' style='top:7px; left:7px;'><button class='btn btn-xs font-xs btn-default hover-transparent'><i class='fa fa-times'></i></button></span></span><a href='#{href}'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #{label}</a></li>",g=2,h=b("#tabs2").tabs(),i=b("#addtab").dialog({autoOpen:!1,width:600,resizable:!1,modal:!0,buttons:[{html:"<i class='fa fa-times'></i>&nbsp; Cancel","class":"btn btn-default",click:function(){b(this).dialog("close")}},{html:"<i class='fa fa-plus'></i>&nbsp; Add","class":"btn btn-danger",click:function(){c(),b(this).dialog("close")}}]});i.find("form").submit(function(a){c(),i.dialog("close"),a.preventDefault()})}b("#add_tab").button().click(function(){i.dialog("open")}),b("#tabs2").on("click","span.delete-tab",function(){var a=b(this).closest("li").remove().attr("aria-controls");b("#"+a).remove(),h.tabs("refresh")})}function d(b){a(function(){c(b)})}return{restrict:"A",link:d}}])});